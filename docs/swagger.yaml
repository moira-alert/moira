basePath: /api
definitions:
  api.ErrorForbiddenExample:
    properties:
      error:
        example: you cannot access this resource
        type: string
      status:
        example: Forbidden
        type: string
    type: object
  api.ErrorInternalServerExample:
    properties:
      error:
        example: server error during request handling
        type: string
      status:
        example: Internal Server Error
        type: string
    type: object
  api.ErrorInvalidRequestExample:
    properties:
      error:
        example: resource with the ID does not exist
        type: string
      status:
        example: Invalid request
        type: string
    type: object
  api.ErrorNotFoundExample:
    properties:
      error:
        example: resource with ID '66741a8c-c2ba-4357-a2c9-ee78e0e7' does not exist
        type: string
      status:
        example: Resource not found
        type: string
    type: object
  api.ErrorRemoteServerUnavailableExample:
    properties:
      error:
        example: Remote server error, please contact administrator
        type: string
      status:
        example: Remote server unavailable
        type: string
    type: object
  api.ErrorRenderExample:
    properties:
      error:
        example: rendering error
        type: string
      status:
        example: Error rendering response
        type: string
    type: object
  dto.Contact:
    properties:
      id:
        example: 1dd38765-c5be-418d-81fa-7a5f879c2315
        type: string
      team_id:
        type: string
      type:
        example: mail
        type: string
      user:
        example: ""
        type: string
      value:
        example: devops@example.com
        type: string
    type: object
  dto.ContactEventItem:
    properties:
      metric:
        type: string
      old_state:
        type: string
      state:
        type: string
      timestamp:
        type: integer
      trigger_id:
        type: string
    type: object
  dto.ContactEventItemList:
    properties:
      list:
        items:
          $ref: '#/definitions/dto.ContactEventItem'
        type: array
    type: object
  dto.ContactList:
    properties:
      list:
        items:
          $ref: '#/definitions/moira.ContactData'
        type: array
    type: object
  dto.EventsList:
    properties:
      list:
        items:
          $ref: '#/definitions/moira.NotificationEvent'
        type: array
      page:
        example: 0
        type: integer
      size:
        example: 100
        type: integer
      total:
        example: 10
        type: integer
    type: object
  dto.MessageResponse:
    properties:
      message:
        example: tag deleted
        type: string
    type: object
  dto.NotificationDeleteResponse:
    properties:
      result:
        example: 0
        type: integer
    type: object
  dto.NotificationsList:
    properties:
      list:
        items:
          $ref: '#/definitions/moira.ScheduledNotification'
        type: array
      total:
        example: 0
        type: integer
    type: object
  dto.NotifierState:
    properties:
      message:
        example: Moira has been turned off for maintenance
        type: string
      state:
        example: ERROR
        type: string
    type: object
  dto.PatternData:
    properties:
      metrics:
        example:
        - DevOps.my_server.hdd.freespace_mbytes
        - ' DevOps.my_server.hdd.freespace_mbytes'
        - ' DevOps.my_server.db.*'
        items:
          type: string
        type: array
      pattern:
        example: Devops.my_server.*
        type: string
      triggers:
        items:
          $ref: '#/definitions/dto.TriggerModel'
        type: array
    type: object
  dto.PatternList:
    properties:
      list:
        items:
          $ref: '#/definitions/dto.PatternData'
        type: array
    type: object
  dto.PatternMetrics:
    properties:
      metrics:
        additionalProperties:
          items:
            $ref: '#/definitions/moira.MetricValue'
          type: array
        type: object
      pattern:
        type: string
      retention:
        additionalProperties:
          type: integer
        type: object
    type: object
  dto.ProblemOfTarget:
    properties:
      argument:
        example: consolidateBy
        type: string
      description:
        example: This function affects only visual graph representation. It is meaningless
          in Moira
        type: string
      position:
        example: 0
        type: integer
      problems:
        items:
          $ref: '#/definitions/dto.ProblemOfTarget'
        type: array
      type:
        allOf:
        - $ref: '#/definitions/dto.typeOfProblem'
        example: warn
    type: object
  dto.SaveTeamResponse:
    properties:
      id:
        example: d5d98eb3-ee18-4f75-9364-244f67e23b54
        type: string
    type: object
  dto.SaveTriggerResponse:
    properties:
      checkResult:
        $ref: '#/definitions/dto.TriggerCheckResponse'
      id:
        example: trigger_id
        type: string
      message:
        example: trigger created
        type: string
    type: object
  dto.Subscription:
    properties:
      any_tags:
        example: false
        type: boolean
      contacts:
        example:
        - acd2db98-1659-4a2f-b227-52d71f6e3ba1
        items:
          type: string
        type: array
      enabled:
        example: true
        type: boolean
      id:
        example: 292516ed-4924-4154-a62c-ebe312431fce
        type: string
      ignore_recoverings:
        example: false
        type: boolean
      ignore_warnings:
        example: false
        type: boolean
      plotting:
        $ref: '#/definitions/moira.PlottingData'
      sched:
        $ref: '#/definitions/moira.ScheduleData'
      tags:
        example:
        - server
        - cpu
        items:
          type: string
        type: array
      team_id:
        example: 324516ed-4924-4154-a62c-eb124234fce
        type: string
      throttling:
        example: false
        type: boolean
      user:
        example: ""
        type: string
    type: object
  dto.SubscriptionList:
    properties:
      list:
        items:
          $ref: '#/definitions/moira.SubscriptionData'
        type: array
    type: object
  dto.TagStatistics:
    properties:
      name:
        example: cpu
        type: string
      subscriptions:
        items:
          $ref: '#/definitions/moira.SubscriptionData'
        type: array
      triggers:
        example:
        - bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        items:
          type: string
        type: array
    type: object
  dto.TagsData:
    properties:
      list:
        example:
        - cpu
        items:
          type: string
        type: array
    type: object
  dto.TagsStatistics:
    properties:
      list:
        items:
          $ref: '#/definitions/dto.TagStatistics'
        type: array
    type: object
  dto.TeamMembers:
    properties:
      usernames:
        example:
        - anonymous
        items:
          type: string
        type: array
    type: object
  dto.TeamModel:
    properties:
      description:
        example: Team that holds all members of infrastructure division
        type: string
      id:
        example: d5d98eb3-ee18-4f75-9364-244f67e23b54
        type: string
      name:
        example: Infrastructure Team
        type: string
    type: object
  dto.TeamSettings:
    properties:
      contacts:
        items:
          $ref: '#/definitions/moira.ContactData'
        type: array
      subscriptions:
        items:
          $ref: '#/definitions/moira.SubscriptionData'
        type: array
      team_id:
        example: d5d98eb3-ee18-4f75-9364-244f67e23b54
        type: string
    type: object
  dto.ThrottlingResponse:
    properties:
      throttling:
        example: 0
        type: integer
    type: object
  dto.TreeOfProblems:
    properties:
      syntax_ok:
        example: true
        type: boolean
      tree_of_problems:
        $ref: '#/definitions/dto.ProblemOfTarget'
    type: object
  dto.Trigger:
    properties:
      alone_metrics:
        additionalProperties:
          type: boolean
        description: A list of targets that have only alone metrics
        example:
          t1: true
        type: object
      created_at:
        description: Datetime when the trigger was created
        type: string
      created_by:
        description: Username who created trigger
        type: string
      desc:
        description: Description string
        example: check the size of /var/log
        type: string
      error_value:
        description: ERROR threshold
        example: 1000
        type: number
      expression:
        description: Used if you need more complex logic than provided by WARN/ERROR
          values
        example: ""
        type: string
      id:
        description: Trigger unique ID
        example: 292516ed-4924-4154-a62c-ebe312431fce
        type: string
      is_remote:
        description: Shows if trigger is remote (graphite-backend) based or stored
          inside Moira-Redis DB
        example: false
        type: boolean
      mute_new_metrics:
        description: If true, first event NODATA → OK will be omitted
        example: false
        type: boolean
      name:
        description: Trigger name
        example: Not enough disk space left
        type: string
      patterns:
        description: Graphite patterns for trigger
        example:
        - ""
        items:
          type: string
        type: array
      sched:
        allOf:
        - $ref: '#/definitions/moira.ScheduleData'
        description: Determines when Moira should monitor trigger
      tags:
        description: Set of tags to manipulate subscriptions
        example:
        - server
        - disk
        items:
          type: string
        type: array
      targets:
        description: 'Graphite-like targets: t1, t2, ...'
        example:
        - devOps.my_server.hdd.freespace_mbytes
        items:
          type: string
        type: array
      throttling:
        example: 0
        type: integer
      trigger_type:
        description: 'Could be: rising, falling, expression'
        example: rising
        type: string
      ttl:
        description: When there are no metrics for trigger, Moira will switch metric
          to TTLState state after TTL seconds
        example: 600
        type: integer
      ttl_state:
        description: When there are no metrics for trigger, Moira will switch metric
          to TTLState state after TTL seconds
        example: NODATA
        type: string
      updated_at:
        description: Datetime  when the trigger was updated
        type: string
      updated_by:
        description: Username who updated trigger
        type: string
      warn_value:
        description: WARN threshold
        example: 500
        type: number
    type: object
  dto.TriggerCheck:
    properties:
      event_timestamp:
        example: 1590741878
        type: integer
      last_successful_check_timestamp:
        example: 1590741916
        type: integer
      maintenance:
        example: 0
        type: integer
      maintenance_info:
        $ref: '#/definitions/moira.MaintenanceInfo'
      metrics:
        additionalProperties:
          $ref: '#/definitions/moira.MetricState'
        type: object
      metrics_to_target_relation:
        additionalProperties:
          type: string
        description: "MetricsToTargetRelation is a map that holds relation between
          metric names that was alone during last\ncheck and targets that fetched
          this metric\n\t{\"t1\": \"metric.name.1\", \"t2\": \"metric.name.2\"}"
        example:
          t1: metric.name.1
          t2: metric.name.2
        type: object
      msg:
        type: string
      score:
        example: 100
        type: integer
      state:
        example: OK
        type: string
      suppressed:
        example: true
        type: boolean
      suppressed_state:
        type: string
      timestamp:
        example: 1590741916
        type: integer
      trigger_id:
        example: trigger_id
        type: string
    type: object
  dto.TriggerCheckResponse:
    properties:
      targets:
        description: 'Graphite-like targets: t1, t2, ...'
        items:
          $ref: '#/definitions/dto.TreeOfProblems'
        type: array
    type: object
  dto.TriggerDump:
    properties:
      created:
        type: string
      last_check:
        $ref: '#/definitions/moira.CheckData'
      metrics:
        items:
          $ref: '#/definitions/dto.PatternMetrics'
        type: array
      trigger:
        $ref: '#/definitions/moira.Trigger'
    type: object
  dto.TriggerMaintenance:
    properties:
      metrics:
        additionalProperties:
          type: integer
        type: object
      trigger:
        example: 1594225165
        type: integer
    type: object
  dto.TriggerMetrics:
    additionalProperties:
      additionalProperties:
        items:
          $ref: '#/definitions/moira.MetricValue'
        type: array
      type: object
    type: object
  dto.TriggerModel:
    properties:
      alone_metrics:
        additionalProperties:
          type: boolean
        description: A list of targets that have only alone metrics
        example:
          t1: true
        type: object
      created_at:
        description: Datetime when the trigger was created
        type: string
      created_by:
        description: Username who created trigger
        type: string
      desc:
        description: Description string
        example: check the size of /var/log
        type: string
      error_value:
        description: ERROR threshold
        example: 1000
        type: number
      expression:
        description: Used if you need more complex logic than provided by WARN/ERROR
          values
        example: ""
        type: string
      id:
        description: Trigger unique ID
        example: 292516ed-4924-4154-a62c-ebe312431fce
        type: string
      is_remote:
        description: Shows if trigger is remote (graphite-backend) based or stored
          inside Moira-Redis DB
        example: false
        type: boolean
      mute_new_metrics:
        description: If true, first event NODATA → OK will be omitted
        example: false
        type: boolean
      name:
        description: Trigger name
        example: Not enough disk space left
        type: string
      patterns:
        description: Graphite patterns for trigger
        example:
        - ""
        items:
          type: string
        type: array
      sched:
        allOf:
        - $ref: '#/definitions/moira.ScheduleData'
        description: Determines when Moira should monitor trigger
      tags:
        description: Set of tags to manipulate subscriptions
        example:
        - server
        - disk
        items:
          type: string
        type: array
      targets:
        description: 'Graphite-like targets: t1, t2, ...'
        example:
        - devOps.my_server.hdd.freespace_mbytes
        items:
          type: string
        type: array
      trigger_type:
        description: 'Could be: rising, falling, expression'
        example: rising
        type: string
      ttl:
        description: When there are no metrics for trigger, Moira will switch metric
          to TTLState state after TTL seconds
        example: 600
        type: integer
      ttl_state:
        description: When there are no metrics for trigger, Moira will switch metric
          to TTLState state after TTL seconds
        example: NODATA
        type: string
      updated_at:
        description: Datetime  when the trigger was updated
        type: string
      updated_by:
        description: Username who updated trigger
        type: string
      warn_value:
        description: WARN threshold
        example: 500
        type: number
    type: object
  dto.TriggersList:
    properties:
      list:
        items:
          $ref: '#/definitions/moira.TriggerCheck'
        type: array
      page:
        type: integer
      pager:
        type: string
      size:
        type: integer
      total:
        type: integer
    type: object
  dto.TriggersSearchResultDeleteResponse:
    properties:
      pager_id:
        example: 292516ed-4924-4154-a62c-ebe312431fce
        type: string
    type: object
  dto.User:
    properties:
      login:
        example: john
        type: string
    type: object
  dto.UserSettings:
    properties:
      contacts:
        items:
          $ref: '#/definitions/moira.ContactData'
        type: array
      login:
        example: john
        type: string
      subscriptions:
        items:
          $ref: '#/definitions/moira.SubscriptionData'
        type: array
    type: object
  dto.UserTeams:
    properties:
      teams:
        items:
          $ref: '#/definitions/dto.TeamModel'
        type: array
    type: object
  dto.typeOfProblem:
    enum:
    - warn
    - bad
    type: string
    x-enum-varnames:
    - isWarn
    - isBad
  handler.ConfigurationResponse:
    properties:
      contacts:
        items:
          $ref: '#/definitions/handler.Contact'
        type: array
      remoteAllowed:
        example: false
        type: boolean
    type: object
  handler.Contact:
    properties:
      label:
        example: Telegram
        type: string
      type:
        example: telegram
        type: string
    type: object
  moira.CheckData:
    properties:
      event_timestamp:
        example: 1590741878
        type: integer
      last_successful_check_timestamp:
        example: 1590741916
        type: integer
      maintenance:
        example: 0
        type: integer
      maintenance_info:
        $ref: '#/definitions/moira.MaintenanceInfo'
      metrics:
        additionalProperties:
          $ref: '#/definitions/moira.MetricState'
        type: object
      metrics_to_target_relation:
        additionalProperties:
          type: string
        description: "MetricsToTargetRelation is a map that holds relation between
          metric names that was alone during last\ncheck and targets that fetched
          this metric\n\t{\"t1\": \"metric.name.1\", \"t2\": \"metric.name.2\"}"
        example:
          t1: metric.name.1
          t2: metric.name.2
        type: object
      msg:
        type: string
      score:
        example: 100
        type: integer
      state:
        example: OK
        type: string
      suppressed:
        example: true
        type: boolean
      suppressed_state:
        type: string
      timestamp:
        example: 1590741916
        type: integer
    type: object
  moira.ContactData:
    properties:
      id:
        example: 1dd38765-c5be-418d-81fa-7a5f879c2315
        type: string
      team:
        type: string
      type:
        example: mail
        type: string
      user:
        example: ""
        type: string
      value:
        example: devops@example.com
        type: string
    type: object
  moira.EventInfo:
    properties:
      interval:
        example: 0
        type: integer
      maintenance:
        $ref: '#/definitions/moira.MaintenanceInfo'
    type: object
  moira.MaintenanceInfo:
    properties:
      remove_time:
        example: 0
        type: integer
      remove_user:
        type: string
      setup_time:
        example: 0
        type: integer
      setup_user:
        type: string
    type: object
  moira.MetricState:
    properties:
      event_timestamp:
        example: 1590741878
        type: integer
      maintenance:
        example: 0
        type: integer
      maintenance_info:
        $ref: '#/definitions/moira.MaintenanceInfo'
      state:
        example: OK
        type: string
      suppressed:
        example: false
        type: boolean
      suppressed_state:
        type: string
      timestamp:
        example: 1590741878
        type: integer
      value:
        example: 70
        type: number
      values:
        additionalProperties:
          type: number
        type: object
    type: object
  moira.MetricValue:
    properties:
      step:
        type: integer
      ts:
        type: integer
      value:
        type: number
    type: object
  moira.NotificationEvent:
    properties:
      contact_id:
        type: string
      event_message:
        $ref: '#/definitions/moira.EventInfo'
      metric:
        example: carbon.agents.*.metricsReceived
        type: string
      msg:
        type: string
      old_state:
        example: ERROR
        type: string
      state:
        example: OK
        type: string
      sub_id:
        type: string
      timestamp:
        example: 1590741878
        type: integer
      trigger_event:
        example: true
        type: boolean
      trigger_id:
        example: 5ff37996-8927-4cab-8987-970e80d8e0a8
        type: string
      value:
        example: 70
        type: number
      values:
        additionalProperties:
          type: number
        type: object
    type: object
  moira.PlottingData:
    properties:
      enabled:
        example: true
        type: boolean
      theme:
        example: dark
        type: string
    type: object
  moira.ScheduleData:
    properties:
      days:
        items:
          $ref: '#/definitions/moira.ScheduleDataDay'
        type: array
      endOffset:
        example: 1439
        type: integer
      startOffset:
        example: 0
        type: integer
      tzOffset:
        example: -60
        type: integer
    type: object
  moira.ScheduleDataDay:
    properties:
      enabled:
        example: true
        type: boolean
      name:
        example: Mon
        type: string
    type: object
  moira.ScheduledNotification:
    properties:
      contact:
        $ref: '#/definitions/moira.ContactData'
      event:
        $ref: '#/definitions/moira.NotificationEvent'
      plotting:
        $ref: '#/definitions/moira.PlottingData'
      send_fail:
        example: 0
        type: integer
      throttled:
        example: false
        type: boolean
      timestamp:
        example: 1594471927
        type: integer
      trigger:
        $ref: '#/definitions/moira.TriggerData'
    type: object
  moira.SubscriptionData:
    properties:
      any_tags:
        example: false
        type: boolean
      contacts:
        example:
        - acd2db98-1659-4a2f-b227-52d71f6e3ba1
        items:
          type: string
        type: array
      enabled:
        example: true
        type: boolean
      id:
        example: 292516ed-4924-4154-a62c-ebe312431fce
        type: string
      ignore_recoverings:
        example: false
        type: boolean
      ignore_warnings:
        example: false
        type: boolean
      plotting:
        $ref: '#/definitions/moira.PlottingData'
      sched:
        $ref: '#/definitions/moira.ScheduleData'
      tags:
        example:
        - server
        - cpu
        items:
          type: string
        type: array
      team_id:
        example: 324516ed-4924-4154-a62c-eb124234fce
        type: string
      throttling:
        example: false
        type: boolean
      user:
        example: ""
        type: string
    type: object
  moira.Trigger:
    properties:
      alone_metrics:
        additionalProperties:
          type: boolean
        example:
          t1: true
        type: object
      created_at:
        type: integer
      created_by:
        type: string
      desc:
        example: check the size of /var/log
        type: string
      error_value:
        example: 1000
        type: number
      expression:
        example: ""
        type: string
      id:
        example: 292516ed-4924-4154-a62c-ebe312431fce
        type: string
      is_remote:
        example: false
        type: boolean
      mute_new_metrics:
        example: false
        type: boolean
      name:
        example: Not enough disk space left
        type: string
      patterns:
        example:
        - ""
        items:
          type: string
        type: array
      python_expression:
        type: string
      sched:
        $ref: '#/definitions/moira.ScheduleData'
      tags:
        example:
        - server
        - disk
        items:
          type: string
        type: array
      targets:
        example:
        - devOps.my_server.hdd.freespace_mbytes
        items:
          type: string
        type: array
      trigger_type:
        example: rising
        type: string
      ttl:
        example: 600
        type: integer
      ttl_state:
        example: NODATA
        type: string
      updated_at:
        type: integer
      updated_by:
        type: string
      warn_value:
        example: 5000
        type: number
    type: object
  moira.TriggerCheck:
    properties:
      alone_metrics:
        additionalProperties:
          type: boolean
        example:
          t1: true
        type: object
      created_at:
        type: integer
      created_by:
        type: string
      desc:
        example: check the size of /var/log
        type: string
      error_value:
        example: 1000
        type: number
      expression:
        example: ""
        type: string
      highlights:
        additionalProperties:
          type: string
        type: object
      id:
        example: 292516ed-4924-4154-a62c-ebe312431fce
        type: string
      is_remote:
        example: false
        type: boolean
      last_check:
        $ref: '#/definitions/moira.CheckData'
      mute_new_metrics:
        example: false
        type: boolean
      name:
        example: Not enough disk space left
        type: string
      patterns:
        example:
        - ""
        items:
          type: string
        type: array
      python_expression:
        type: string
      sched:
        $ref: '#/definitions/moira.ScheduleData'
      tags:
        example:
        - server
        - disk
        items:
          type: string
        type: array
      targets:
        example:
        - devOps.my_server.hdd.freespace_mbytes
        items:
          type: string
        type: array
      throttling:
        example: 0
        type: integer
      trigger_type:
        example: rising
        type: string
      ttl:
        example: 600
        type: integer
      ttl_state:
        example: NODATA
        type: string
      updated_at:
        type: integer
      updated_by:
        type: string
      warn_value:
        example: 5000
        type: number
    type: object
  moira.TriggerData:
    properties:
      __notifier_trigger_tags:
        example:
        - server
        - disk
        items:
          type: string
        type: array
      desc:
        example: check the size of /var/log
        type: string
      error_value:
        example: 1000
        type: number
      id:
        example: 292516ed-4924-4154-a62c-ebe312431fce
        type: string
      is_remote:
        example: false
        type: boolean
      name:
        example: Not enough disk space left
        type: string
      targets:
        example:
        - devOps.my_server.hdd.freespace_mbytes
        items:
          type: string
        type: array
      warn_value:
        example: 5000
        type: number
    type: object
info:
  contact:
    email: opensource@skbkontur.com
    name: Contact Moira Team
  description: This is an API description for [Moira Alert API](https://moira.readthedocs.io/en/latest/overview.html).
  license:
    name: MIT
  title: Moira Alert
  version: master
paths:
  /config:
    get:
      operationId: get-web-config
      produces:
      - application/json
      responses:
        "200":
          description: Configuration fetched successfully
          schema:
            $ref: '#/definitions/handler.ConfigurationResponse'
      summary: Get available configuration
      tags:
      - config
  /contact:
    get:
      operationId: get-all-contacts
      produces:
      - application/json
      responses:
        "200":
          description: Contacts fetched successfully
          schema:
            $ref: '#/definitions/dto.ContactList'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Gets all Moira contacts
      tags:
      - contact
    put:
      consumes:
      - application/json
      operationId: create-new-contact
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      - description: Contact data
        in: body
        name: contact
        required: true
        schema:
          $ref: '#/definitions/dto.Contact'
      produces:
      - application/json
      responses:
        "200":
          description: Contact created successfully
          schema:
            $ref: '#/definitions/dto.Contact'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Creates a new contact notification for the current user
      tags:
      - contact
  /contact/{contactID}:
    delete:
      consumes:
      - application/json
      operationId: remove-contact
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: ID of the contact to remove
        in: path
        name: contactID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Contact has been deleted
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorForbiddenExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Deletes notification contact for the current user and remove the contact
        ID from all subscriptions
      tags:
      - contact
    get:
      operationId: get-contact-by-id
      parameters:
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: Contact ID
        in: path
        name: contactID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully received contact
          schema:
            $ref: '#/definitions/dto.Contact'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorForbiddenExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Get contact by ID
      tags:
      - contact
    put:
      consumes:
      - application/json
      operationId: update-contact
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: ID of the contact to update
        in: path
        name: contactID
        required: true
        type: string
      - description: Updated contact data
        in: body
        name: contact
        required: true
        schema:
          $ref: '#/definitions/dto.Contact'
      produces:
      - application/json
      responses:
        "200":
          description: Updated contact
          schema:
            $ref: '#/definitions/dto.Contact'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorForbiddenExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Updates an existing notification contact to the values passed in the
        request body
      tags:
      - contact
  /contact/{contactID}/events:
    get:
      operationId: get-contact-events-by-id
      parameters:
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: Contact ID
        in: path
        name: contactID
        required: true
        type: string
      - default: -3hour
        description: Start time of the time range
        in: query
        name: from
        type: string
      - default: now
        description: End time of the time range
        in: query
        name: to
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully received contact events
          schema:
            $ref: '#/definitions/dto.ContactEventItemList'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorForbiddenExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Get contact events by ID with time range
      tags:
      - contact
  /contact/{contactID}/test:
    post:
      consumes:
      - application/json
      operationId: send-test-contact-notification
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: The ID of the target contact
        in: path
        name: contactID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Test successful
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorForbiddenExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Push a test notification to verify that the contact is properly set
        up
      tags:
      - contact
  /event/{triggerID}:
    get:
      operationId: get-events-list
      parameters:
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: The ID of updated trigger
        in: path
        name: triggerID
        required: true
        type: string
      - default: 15
        description: Number of items to be displayed on one page
        in: query
        name: size
        type: integer
      - default: 1
        description: Defines the number of the displayed page. E.g, p=2 would display
          the 2nd page
        in: query
        name: p
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Events fetched successfully
          schema:
            $ref: '#/definitions/dto.EventsList'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Gets all trigger events for current page and their count
      tags:
      - event
  /event/all:
    delete:
      operationId: delete-all-events
      produces:
      - application/json
      responses:
        "200":
          description: Events removed successfully
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Deletes all notification events
      tags:
      - event
  /health/notifier:
    get:
      operationId: get-notifier-state
      produces:
      - application/json
      responses:
        "200":
          description: Notifier state retrieved
          schema:
            $ref: '#/definitions/dto.NotifierState'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Get notifier state
      tags:
      - health
    put:
      consumes:
      - application/json
      operationId: set-notifier-state
      parameters:
      - description: New notifier state
        in: body
        name: state
        required: true
        schema:
          $ref: '#/definitions/dto.NotifierState'
      produces:
      - application/json
      responses:
        "200":
          description: Update state of the Moira service
          schema:
            $ref: '#/definitions/dto.NotifierState'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Update notifier state
      tags:
      - health
  /notification:
    delete:
      operationId: delete-notification
      parameters:
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: The ID of updated trigger
        in: query
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Notification have been deleted
          schema:
            $ref: '#/definitions/dto.NotificationDeleteResponse'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Delete a notification by id
      tags:
      - notification
    get:
      operationId: get-notifications
      parameters:
      - default: 0
        description: 'Default Value: 0'
        in: query
        name: start
        type: integer
      - default: -1
        description: 'Default Value: -1'
        in: query
        name: end
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Notifications fetched successfully
          schema:
            $ref: '#/definitions/dto.NotificationsList'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Gets a paginated list of notifications, all notifications are fetched
        if end = -1 and start = 0
      tags:
      - notification
  /notification/all:
    delete:
      operationId: delete-all-notifications
      produces:
      - application/json
      responses:
        "200":
          description: All notifications have been deleted
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Deletes all available notifications
      tags:
      - notification
  /pattern:
    get:
      operationId: get-all-patterns
      produces:
      - application/json
      responses:
        "200":
          description: Patterns fetched successfully
          schema:
            $ref: '#/definitions/dto.PatternList'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Get all patterns
      tags:
      - pattern
  /pattern/{pattern}:
    delete:
      operationId: delete-pattern
      parameters:
      - default: DevOps.my_server.hdd.freespace_mbytes
        description: Trigger pattern to operate on
        in: path
        name: pattern
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Pattern deleted successfully
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Deletes a Moira pattern
      tags:
      - pattern
  /subscription:
    get:
      operationId: get-user-subscriptions
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Subscriptions fetched successfully
          schema:
            $ref: '#/definitions/dto.SubscriptionList'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Get all subscriptions
      tags:
      - subscription
    put:
      consumes:
      - application/json
      operationId: create-subscription
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      - description: Subscription data
        in: body
        name: subscription
        required: true
        schema:
          $ref: '#/definitions/dto.Subscription'
      produces:
      - application/json
      responses:
        "200":
          description: Subscription created successfully
          schema:
            $ref: '#/definitions/dto.Subscription'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Create a new subscription
      tags:
      - subscription
  /subscription/{subscriptionID}:
    delete:
      operationId: remove-subscription
      parameters:
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: ID of the subscription to remove
        in: path
        name: subscriptionID
        required: true
        type: string
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Subscription deleted
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorForbiddenExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Delete a subscription
      tags:
      - subscription
    put:
      consumes:
      - application/json
      operationId: update-subscription
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: ID of the subscription to update
        in: path
        name: subscriptionID
        required: true
        type: string
      - description: Updated subscription data
        in: body
        name: subscription
        required: true
        schema:
          $ref: '#/definitions/dto.Subscription'
      produces:
      - application/json
      responses:
        "200":
          description: Subscription updated successfully
          schema:
            $ref: '#/definitions/dto.Subscription'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorForbiddenExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Update a subscription
      tags:
      - subscription
  /subscription/{subscriptionID}/test:
    put:
      operationId: send-test-notification
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: ID of the subscription to send the test notification
        in: path
        name: subscriptionID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Test notification sent successfully
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorForbiddenExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Send a test notification for a subscription
      tags:
      - subscription
  /tag:
    get:
      operationId: get-all-tags
      produces:
      - application/json
      responses:
        "200":
          description: Tags fetched successfully
          schema:
            $ref: '#/definitions/dto.TagsData'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Get all tags
      tags:
      - tag
  /tag/{tag}:
    delete:
      operationId: remove-tag
      parameters:
      - default: cpu
        description: Name of the tag to remove
        in: path
        name: tag
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Tag removed successfully
          schema:
            $ref: '#/definitions/dto.MessageResponse'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Remove a tag
      tags:
      - tag
  /tag/stats:
    get:
      operationId: get-all-tags-and-subscriptions
      produces:
      - application/json
      responses:
        "200":
          description: Successful
          schema:
            $ref: '#/definitions/dto.TagsStatistics'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Get all tags and their subscriptions
      tags:
      - tag
  /teams:
    get:
      operationId: get-all-teams
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Teams fetched successfully
          schema:
            $ref: '#/definitions/dto.UserTeams'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Get all teams
      tags:
      - team
    post:
      consumes:
      - application/json
      operationId: create-team
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      - description: Team data
        in: body
        name: team
        required: true
        schema:
          $ref: '#/definitions/dto.TeamModel'
      produces:
      - application/json
      responses:
        "200":
          description: Team created successfully
          schema:
            $ref: '#/definitions/dto.SaveTeamResponse'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Create a new team
      tags:
      - team
  /teams/{teamID}:
    delete:
      operationId: delete-team
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: ID of the team
        in: path
        name: teamID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Team has been successfully deleted
          schema:
            $ref: '#/definitions/dto.SaveTeamResponse'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorForbiddenExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Delete a team
      tags:
      - team
    get:
      operationId: get-team
      parameters:
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: ID of the team
        in: path
        name: teamID
        required: true
        type: string
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Team updated successfully
          schema:
            $ref: '#/definitions/dto.TeamModel'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorForbiddenExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Get a team by ID
      tags:
      - team
    patch:
      consumes:
      - application/json
      operationId: update-team
      parameters:
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: ID of the team
        in: path
        name: teamID
        required: true
        type: string
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      - description: Updated team data
        in: body
        name: team
        required: true
        schema:
          $ref: '#/definitions/dto.TeamModel'
      produces:
      - application/json
      responses:
        "200":
          description: Team updated successfully
          schema:
            $ref: '#/definitions/dto.SaveTeamResponse'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorForbiddenExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Update existing team
      tags:
      - team
  /teams/{teamID}/contacts:
    post:
      consumes:
      - application/json
      operationId: create-new-team-contact
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: The ID of team
        in: path
        name: teamID
        required: true
        type: string
      - description: Team contact data
        in: body
        name: contact
        required: true
        schema:
          $ref: '#/definitions/dto.Contact'
      produces:
      - application/json
      responses:
        "200":
          description: Team contact created successfully
          schema:
            $ref: '#/definitions/dto.Contact'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorForbiddenExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Create a new team contact
      tags:
      - teamContact
  /teams/{teamID}/settings:
    get:
      operationId: get-team-settings
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: ID of the team
        in: path
        name: teamID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Team settings
          schema:
            $ref: '#/definitions/dto.TeamSettings'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorForbiddenExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Get team settings
      tags:
      - team
  /teams/{teamID}/subscriptions:
    post:
      consumes:
      - application/json
      operationId: create-new-team-subscription
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: The ID of team
        in: path
        name: teamID
        required: true
        type: string
      - description: Team subscription data
        in: body
        name: subscription
        required: true
        schema:
          $ref: '#/definitions/dto.Subscription'
      produces:
      - application/json
      responses:
        "200":
          description: Team subscription created successfully
          schema:
            $ref: '#/definitions/dto.Subscription'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorForbiddenExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Create a new team subscription
      tags:
      - teamSubscription
  /teams/{teamID}/users:
    get:
      operationId: get-team-users
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: ID of the team
        in: path
        name: teamID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Users fetched successfully
          schema:
            $ref: '#/definitions/dto.TeamMembers'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorForbiddenExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Get users of a team
      tags:
      - team
    post:
      consumes:
      - application/json
      operationId: add-team-users
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: ID of the team
        in: path
        name: teamID
        required: true
        type: string
      - description: Usernames to add to the team
        in: body
        name: usernames
        required: true
        schema:
          $ref: '#/definitions/dto.TeamMembers'
      produces:
      - application/json
      responses:
        "200":
          description: Team updated successfully
          schema:
            $ref: '#/definitions/dto.TeamMembers'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorForbiddenExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Add users to a team
      tags:
      - team
    put:
      consumes:
      - application/json
      operationId: set-team-users
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: ID of the team
        in: path
        name: teamID
        required: true
        type: string
      - description: Usernames to set as team members
        in: body
        name: usernames
        required: true
        schema:
          $ref: '#/definitions/dto.TeamMembers'
      produces:
      - application/json
      responses:
        "200":
          description: Team updated successfully
          schema:
            $ref: '#/definitions/dto.TeamMembers'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorForbiddenExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Set users of a team
      tags:
      - team
  /teams/{teamID}/users/{teamUserID}:
    delete:
      operationId: delete-team-user
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: ID of the team
        in: path
        name: teamID
        required: true
        type: string
      - default: anonymous
        description: User login in methods related to teams manipulation
        in: path
        name: teamUserID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Team updated successfully
          schema:
            $ref: '#/definitions/dto.TeamMembers'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/api.ErrorForbiddenExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Delete a user from a team
      tags:
      - team
  /trigger:
    get:
      operationId: get-all-triggers
      produces:
      - application/json
      responses:
        "200":
          description: Fetched all triggers
          schema:
            $ref: '#/definitions/dto.TriggersList'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Get all triggers
      tags:
      - trigger
    put:
      consumes:
      - application/json
      operationId: create-trigger
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      - description: Trigger data
        in: body
        name: trigger
        required: true
        schema:
          $ref: '#/definitions/dto.Trigger'
      produces:
      - application/json
      responses:
        "200":
          description: Trigger created successfully
          schema:
            $ref: '#/definitions/dto.SaveTriggerResponse'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
        "503":
          description: Remote server unavailable
          schema:
            $ref: '#/definitions/api.ErrorRemoteServerUnavailableExample'
      summary: Create a new trigger
      tags:
      - trigger
  /trigger/{triggerID}:
    delete:
      operationId: remove-trigger
      parameters:
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: Trigger ID
        in: path
        name: triggerID
        required: true
        type: string
      responses:
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Remove trigger
      tags:
      - trigger
    get:
      operationId: get-trigger
      parameters:
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: Trigger ID
        in: path
        name: triggerID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Trigger data
          schema:
            $ref: '#/definitions/dto.Trigger'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Get an existing trigger
      tags:
      - trigger
    put:
      operationId: update-trigger
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: Trigger ID
        in: path
        name: triggerID
        required: true
        type: string
      - description: Trigger data
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.Trigger'
      produces:
      - application/json
      responses:
        "200":
          description: Updated trigger
          schema:
            $ref: '#/definitions/dto.SaveTriggerResponse'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
        "503":
          description: Remote server unavailable
          schema:
            $ref: '#/definitions/api.ErrorRemoteServerUnavailableExample'
      summary: Update existing trigger
      tags:
      - trigger
  /trigger/{triggerID}/dump:
    get:
      operationId: get-trigger-dump
      parameters:
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: Trigger ID
        in: path
        name: triggerID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Trigger dump
          schema:
            $ref: '#/definitions/dto.TriggerDump'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Get trigger dump
      tags:
      - trigger
  /trigger/{triggerID}/metrics:
    delete:
      operationId: delete-trigger-metric
      parameters:
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: Trigger ID
        in: path
        name: triggerID
        required: true
        type: string
      - default: DevOps.my_server.hdd.freespace_mbytes
        description: Name of the target metric
        in: query
        name: name
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Trigger metric deleted successfully
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Delete metric from last check and all trigger pattern metrics
      tags:
      - trigger
    get:
      operationId: get-trigger-metrics
      parameters:
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: Trigger ID
        in: path
        name: triggerID
        required: true
        type: string
      - default: -10minutes
        description: Start time for metrics retrieval
        in: query
        name: from
        type: string
      - default: now
        description: End time for metrics retrieval
        in: query
        name: to
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Trigger metrics retrieved successfully
          schema:
            $ref: '#/definitions/dto.TriggerMetrics'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Get metrics associated with certain trigger
      tags:
      - trigger
  /trigger/{triggerID}/metrics/nodata:
    delete:
      operationId: delete-trigger-nodata-metrics
      parameters:
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: Trigger ID
        in: path
        name: triggerID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Trigger nodata metrics deleted successfully
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Delete all metrics from last data which are in NODATA state. It also
        deletes all trigger patterns of those metrics
      tags:
      - trigger
  /trigger/{triggerID}/render:
    get:
      operationId: render-trigger-metrics
      parameters:
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: Trigger ID
        in: path
        name: triggerID
        required: true
        type: string
      - default: t1
        description: Target metric name
        in: query
        name: targetName
        required: true
        type: string
      - default: -1hour
        description: Start time for metrics retrieval
        in: query
        name: from
        required: true
        type: string
      - default: now
        description: End time for metrics retrieval
        in: query
        name: to
        required: true
        type: string
      - default: UTC
        description: Timezone for rendering
        in: query
        name: timezone
        type: string
      - default: light
        description: Plot theme
        in: query
        name: theme
        type: string
      - default: false
        description: Fetch real-time data
        in: query
        name: realtime
        type: boolean
      produces:
      - image/png
      responses:
        "200":
          description: Rendered plot image successfully
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Render trigger metrics plot
      tags:
      - trigger
  /trigger/{triggerID}/setMaintenance:
    put:
      operationId: set-trigger-maintenance
      parameters:
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: Trigger ID
        in: path
        name: triggerID
        required: true
        type: string
      - description: Maintenance data
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.TriggerMaintenance'
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Trigger or metric have been scheduled for maintenance
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Set metrics and the trigger itself to maintenance mode
      tags:
      - trigger
  /trigger/{triggerID}/state:
    get:
      operationId: get-trigger-state
      parameters:
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: Trigger ID
        in: path
        name: triggerID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Trigger state fetched successful
          schema:
            $ref: '#/definitions/dto.TriggerCheck'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Get the trigger state as at last check
      tags:
      - trigger
  /trigger/{triggerID}/throttling:
    delete:
      operationId: delete-trigger-throttling
      parameters:
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: Trigger ID
        in: path
        name: triggerID
        required: true
        type: string
      responses:
        "200":
          description: Trigger throttling has been deleted
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Deletes throttling for a trigger
      tags:
      - trigger
    get:
      operationId: get-trigger-throttling
      parameters:
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: Trigger ID
        in: path
        name: triggerID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Trigger throttle info retrieved
          schema:
            $ref: '#/definitions/dto.ThrottlingResponse'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
      summary: Get a trigger with its throttling i.e its next allowed message time
      tags:
      - trigger
  /trigger/check:
    put:
      consumes:
      - application/json
      operationId: trigger-check
      parameters:
      - description: Trigger data
        in: body
        name: trigger
        required: true
        schema:
          $ref: '#/definitions/dto.Trigger'
      produces:
      - application/json
      responses:
        "200":
          description: Validation is done, see response body for validation result
          schema:
            $ref: '#/definitions/dto.TriggerCheckResponse'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Validates trigger target
      tags:
      - trigger
  /trigger/pagers/{pagerID}:
    delete:
      parameters:
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: Pager ID to delete
        in: path
        name: pagerID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully deleted pager
          schema:
            $ref: '#/definitions/dto.TriggersSearchResultDeleteResponse'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Delete triggers pager
      tags:
      - trigger
  /trigger/search:
    get:
      operationId: search-triggers
      parameters:
      - default: false
        description: Only include problems
        in: query
        name: onlyProblems
        type: boolean
      - default: cpu
        description: Search text
        in: query
        name: text
        type: string
      - default: 0
        description: Page number
        in: query
        name: p
        type: integer
      - default: 10
        description: Page size
        in: query
        name: size
        type: integer
      - default: false
        description: Create pager
        in: query
        name: createPager
        type: boolean
      - default: bcba82f5-48cf-44c0-b7d6-e1d32c64a88c
        description: Pager ID
        in: query
        name: pagerID
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully fetched matching triggers
          schema:
            $ref: '#/definitions/dto.TriggersList'
        "400":
          description: Bad request from client
          schema:
            $ref: '#/definitions/api.ErrorInvalidRequestExample'
        "404":
          description: Resource not found
          schema:
            $ref: '#/definitions/api.ErrorNotFoundExample'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Search triggers. Replaces the deprecated `page` path
      tags:
      - trigger
  /user:
    get:
      operationId: get-user-name
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: User name fetched successfully
          schema:
            $ref: '#/definitions/dto.User'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
      summary: Gets the username of the authenticated user if it is available
      tags:
      - user
  /user/settings:
    get:
      operationId: get-user-settings
      parameters:
      - description: User session token
        in: header
        name: x-webauth-user
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Settings fetched successfully
          schema:
            $ref: '#/definitions/dto.UserSettings'
        "422":
          description: Render error
          schema:
            $ref: '#/definitions/api.ErrorRenderExample'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/api.ErrorInternalServerExample'
      summary: Get the user's contacts and subscriptions
      tags:
      - user
swagger: "2.0"
tags:
- description: APIs for working with Moira contacts. For more details, see <https://moira.readthedocs.io/en/latest/installation/webhooks_scripts.html#contact/>
  name: contact
- description: View Moira's runtime configuration. For more details, see <https://moira.readthedocs.io/en/latest/installation/configuration.html>
  name: config
- description: APIs for interacting with notification events. See <https://moira.readthedocs.io/en/latest/user_guide/trigger_page.html#event-history/>
    for details
  name: event
- description: interact with Moira states/health status. See <https://moira.readthedocs.io/en/latest/user_guide/selfstate.html#self-state-monitor/>
    for details
  name: health
- description: manage notifications that are currently in queue. See <https://moira.readthedocs.io/en/latest/user_guide/hidden_pages.html#notifications/>
  name: notification
- description: APIs for interacting with graphite patterns in Moira. See <https://moira.readthedocs.io/en/latest/development/architecture.html#pattern/>
  name: pattern
- description: APIs for managing a user's subscription(s). See <https://moira.readthedocs.io/en/latest/development/architecture.html#subscription/>
    to learn about Moira subscriptions
  name: subscription
- description: APIs for managing tags (a grouping of tags and subscriptions). See
    <https://moira.readthedocs.io/en/latest/user_guide/subscriptions.html#tags/>
  name: tag
- description: APIs for interacting with Moira triggers. See <https://moira.readthedocs.io/en/latest/development/architecture.html#trigger/>
    to learn about Triggers
  name: trigger
- description: APIs for interacting with Moira teams
  name: team
- description: APIs for interacting with Moira subscriptions owned by certain team
  name: teamSubscription
- description: APIs for interacting with Moira contacts owned by certain team
  name: teamContact
- description: APIs for interacting with Moira users
  name: user
